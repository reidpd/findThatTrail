<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>findThatTrail</title>
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link type="text/css" rel="stylesheet" href="../css/materialize.css">
    <link rel="stylesheet" href="../css/main.css">
    <style>
      /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
      #map {
        height: 100%;
      }
      /* Optional: Makes the sample page fill the window. */
      html, body {
        height: 96%;
        margin: 0;
        padding: 0;
      }
    </style>
  </head>
  <body>
    <nav>
      <div class="nav-wrapper blue lighten-1">
        <a class="brand-logo right white-text" href="#!">findThatTrail!</a>
        <form>
          <div class="input-field">
            <input id="radius_search" placeholder="How many miles can you wander from the compass?" type="number" min="0" autocomplete="off" required validate>
            <label class="label-icon" for="search"><i class="material-icons">my_location</i></label>
            <button id="radius_submit" class="btn waves-effect waves-light right hide" type="submit" name="action" hidden>Submit</button>
          </div>
        </form>
      </div>
    </nav>

    <div id="map"></div>




<!-- SCRIPTS -->
                <script src="https://code.jquery.com/jquery-3.1.1.js" integrity="sha256-16cdPddA6VdVInumRGo6IbivbERE8p7CQR3HzTBuELA=" crossorigin="anonymous"></script>
                <script src="../js/materialize.js"></script>
                <script type="text/javascript" src="../keys_conf.js"></script>
                <script type="text/javascript" src="../js/map_magic.js"></script>
                <script>
                function getOrPrompt(lsKeyValue) {
                  var valInStorage = localStorage.getItem(lsKeyValue);

                  if(!valInStorage) {
                    valInStorage = prompt(`Enter a value for ${lsKeyValue}`);
                    localStorage.setItem(lsKeyValue, valInStorage);
                  }

                  return valInStorage;
                }

                let GMAPS_KEY = getOrPrompt('GMAPS_KEY');
                let TRAIL_KEY = getOrPrompt('TRAIL_KEY');
                let googleSrc = `` // put proper src in here
                let scriptTag = document.createElement('script');
                scriptTag.src = googleSrc;
                document.body.append(scriptTag);
            </script>
            <script>
            var GOOGLE_MAP_KEY = localStorage.GMAPS_KEY;
            function loadScript() {
              var script = document.createElement('script');
              script.type = 'text/javascript';
              script.src = 'https://maps.googleapis.com/maps/api/js?' +
              'key=' + GOOGLE_MAP_KEY +'&callback=initMap';
              script.async = true;
              script.defer = true;
              document.body.appendChild(script);
            }
            window.onload = loadScript;
            </script>

  </body>
</html>
